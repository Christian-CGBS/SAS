<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Avaliação de SI</title>
    <link rel="stylesheet" href="style.css">

    <script>
        window.criticidade = <%- JSON.stringify(criticidade) %>
    </script>

    <script>
        window.onload = function () {
            
        var chart = new CanvasJS.Chart("chartContainer", {
            animationEnabled: true,
            
            title:{
                text:"ASPECTOS CRÍTICOS"
            },
            axisX:{
                interval: 1
            },
            axisY2:{
                interlacedColor: "rgba(1,77,101,.2)",
                gridColor: "rgba(1,77,101,.1)",
                title: "Os itens MENORES são os de PIOR desempenho"
            },
            data: [{
                type: "bar",
                name: "companies",
                axisYType: "secondary",
                color: "#014D65",
                dataPoints: criticidade.map(c => ({
                    y: c.valor,
                    label: c.nome
                }))
            }]
        });
        chart.render();        
        }
    </script>
</head>
<body>
    <header>
        <h1>Avaliação de Sistemas de Informação</h1>
    </header>
    <main>
        <h2>Avaliação de Aderência de Sistemas de Informação a Processos de Negócio</h2>
        <h3>Saída dos dados</h3>
        
        <p>Sistema avaliado: <%= analise.sistema %> </p>       
                
        <p>Período pesquisado: início em <%= analise.dt_inicio %> término em <%= analise.dt_fim %></p>
        <p>Total de usuários respondentes : <%= analise.qt_resp %></p>
        <p>Amostra significativa ? [S/N] <%= analise.amostra_significativa %></p>
        <p>Grau de admissão da amostra [0 a 9] <%= analise.grau_congruencia %></p>
        <p>Notas obtidas :</p>
        <p>usuários internos : <%= analise.media_resp_int %> => <%= analise.resultado_int %></p>
        <p>usuários externos (se aplicável) : <%= analise.media_resp_ext %> => <%= analise.resultado_ext %></p>
        <p>Pontuação média final : <%= analise.media_final %> => <strong><%= analise.resultado_final %></strong></p>
        <p><%= analise.advertencia %></p>
        <p>Itens de maior criticidade [pontuações mais baixas]</p>
        <ul type="none">
            <% for (var i=0; i < criticidade.length; i++) { %>
                <li>
                    <%= criticidade[i].nome %> = <%= criticidade[i].valor %>
                </li>
            <% } %>
        </ul>

        <div id="chartContainer" style="height: 300px; width: 100%;"></div>
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

        <p>Sugestões recebidas: [10 palavras que mais aparecem] </p>
        <ul type="none">
            <% for (var i=0; i < final.length; i++) { %>
                <li>
                    <%= final[i] %>
                </li>
            <% } %>
        </ul>

        <form action="/gerarpdf">
            <p> Pressione <input type="submit" value="Gerar PDF" id="relatoriopdf"> se quiser obter um relatório em formato .PDF &#x1F4C4</p>   
            
        </form>  
            
    </main>
    <footer>
        <p>Christian Gomes Bezerra dos Santos / christian.gomes@ufpe.br</p>
    </footer>
</body>
</html>